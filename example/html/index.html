<html>

<head>
  <title>PiCams</title>
  <style>
    #video-box {
      background-color: black;
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: calc(100% * 9 / 16);
    }

    #video-box>canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .flexbox {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .video-aligner {
      width: 70%;
    }

    body {
      background-color: black;
      color: white;
    }

    @media only screen and (prefers-color-scheme: dark) {
      .video-aligner {
        width: 100%;
      }

      body {
        background-color: black;
        color: white;
      }
    }

    .my_table {
      padding-top: 20px;
    }

    .my_table tr {
      display: flex;
    }

    .my_table td {
      margin: 2px;
      height: 60px;
      display: flex;
      flex-grow: 1;
      /* centering the button */
      align-items: center;
      justify-content: center;
    }


    .inner_button {
      display: flex;
      /* centering the text inside the button */
      align-items: center;
      justify-content: center;
      width: 100%;

      background-color: dimgray;
      font-size: 50px;
    }

    #shedcam_options {
      display: none;
    }
  </style>
</head>

<body>
  <table width="100%" class="my_table">
    <tr>
      <td>
        <button type="button" class="inner_button"
          onclick="window.location.href='?source=wss://spoluck.ca/wsporchcam'">Porch</button>
      </td>
      <td>
        <button type="button" class="inner_button"
          onclick="window.location.href='?source=wss://spoluck.ca/wsparkingcam'">Parking</button>
      </td>
      <td>
        <button type="button" class="inner_button"
          onclick="window.location.href='?source=wss://spoluck.ca/wsbackyardcam'">Backyard</button>
      </td>
      <td>
        <button type="button" class="inner_button"
          onclick="window.location.href='?source=wss://spoluck.ca/wsshedcam'">Shed</button>
      </td>
    </tr>
  </table>

  <br />
  <p style="display: none;" id='frame_buffer'></p>
  <br />
  <div class="flexbox">
    <div class="video-aligner">
      <div id="video-box">
        <canvas id='cam'>
      </div>
    </div>
<<<<<<< HEAD
  </div>
 
  <iframe id="shedcam_options" src="https://spoluck.ca/picam/shed/" width="100%" height="700px"></iframe> 

  <script type="text/javascript" src="WSAvcPlayer.js">;</script>

  <script type="text/javascript">

    function findGetParameter(parameterName) {
      var result = null,
        tmp = [];
      var items = location.search.substr(1).split("&");
      for (var index = 0; index < items.length; index++) {
        tmp = items[index].split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
      }
      return result;
    }

    var canvas = document.getElementById('cam')
    var fb = document.getElementById('frame_buffer')
    // Create h264 player
    var wsavc = new WSAvcPlayer.default({ useWorker: true });
    document.getElementById('video-box').appendChild(wsavc.AvcPlayer.canvas)
    //expose instance for button callbacks
    window.wsavc = wsavc;

    var uri = findGetParameter("source");
    if (uri.includes("wsshedcam"))
    {
      document.getElementById('shedcam_options').style.display = "inline";
    }

    wsavc.connect(uri);

    wsavc.on('disconnected', () => console.log('WS Disconnected'))
    wsavc.on('connected', () => console.log('WS connected'))
    wsavc.on('frame_shift', (fbl) => {
      fb.innerText = 'fl: ' + fbl
    })

    wsavc.on('resized', (payload) => {
      console.log('resized', payload)
      const vb = document.getElementById('video-box')

      vb.style = `padding-bottom: calc( 100% * ${payload.height} / ${payload.width})`
    })

    wsavc.on('stream_active', active => console.log('Stream is ', active ? 'active' : 'offline'))


    wsavc.on('custom_event_from_server', event => console.log('got event from server', event))

  </script>


</body>

</html>
=======
    </div>

    <br/>
    <p id='frame_buffer2'></p>
    <br/>
    <div class="flexbox">
    <div class="video-aligner">
      <div id="video-box2">
        <canvas id='cam2' >
      </div>
    </div>
    </div>

    <br/>
    <p id='frame_buffer3'></p>
    <br/>
    <div class="flexbox">
    <div class="video-aligner">
      <div id="video-box3">
        <canvas id='cam3' >
      </div>
    </div>
    </div>
    

  <!-- provide WSAvcPlayer -->
  <!-- <script type="text/javascript" src="Decoder.js"></script>
  <script type="text/javascript" src="YUVCanvas.js"></script>
  <script type="text/javascript" src="Player.js"></script> -->
    <!-- <script type="text/javascript" src="Decoder.js">;</script> -->
    <script type="text/javascript" src="WSAvcPlayer.js">;</script>
    
    <script type="text/javascript">




      var canvas2 = document.getElementById('cam2')
      var fb2 = document.getElementById('frame_buffer2')
      // Create h264 player
      var wsavc2 = new WSAvcPlayer.default({useWorker:true});
      document.getElementById('video-box2').appendChild(wsavc2.AvcPlayer.canvas)
      //expose instance for button callbacks
      window.wsavc2 = wsavc2;
      
      //maybe get rid of the ws inside the player?
      //var uri = "ws://meganeko:3000/videoStream"// + document.location.host;
      //var uri2 = "ws://" + document.location.host;
      var uri2 = "ws://192.168.2.103:3334/"
      wsavc2.connect(uri2);

      //wsavc.on('message', m=>console.log(m))
      
      wsavc2.on('disconnected',()=>console.log('WS Disconnected'))
      wsavc2.on('connected',()=>console.log('WS connected'))
      wsavc2.on('frame_shift',(fbl)=>{
       fb2.innerText = 'fl: '+fbl
      })
      

      wsavc2.on('resized',(payload)=>{
        console.log('resized', payload)
        const vb = document.getElementById('video-box2')

        vb.style = `padding-bottom: calc( 100% * ${payload.height} / ${ payload.width })`
      })

      wsavc2.on('stream_active',active=>console.log('Stream is ',active?'active':'offline'))

      wsavc2.on('custom_event_from_server',event=>console.log('got event from server', event))




      var canvas3 = document.getElementById('cam3')
      var fb3 = document.getElementById('frame_buffer3')
      // Create h264 player
      var wsavc3 = new WSAvcPlayer.default({useWorker:true});
      document.getElementById('video-box3').appendChild(wsavc3.AvcPlayer.canvas)
      //expose instance for button callbacks
      window.wsavc3 = wsavc3;

      //maybe get rid of the ws inside the player?
      //var uri = "ws://meganeko:3000/videoStream"// + document.location.host;
      //var uri2 = "ws://" + document.location.host;
      var uri3 = "ws://192.168.2.103:3335/"
      wsavc3.connect(uri3);

      //wsavc.on('message', m=>console.log(m))

      wsavc3.on('disconnected',()=>console.log('WS Disconnected'))
      wsavc3.on('connected',()=>console.log('WS connected'))
      wsavc3.on('frame_shift',(fbl)=>{
      fb3.innerText = 'fl: '+fbl
      })


      wsavc3.on('resized',(payload)=>{
        console.log('resized', payload)
        const vb = document.getElementById('video-box3')

        vb.style = `padding-bottom: calc( 100% * ${payload.height} / ${ payload.width })`
      })

      wsavc3.on('stream_active',active=>console.log('Stream is ',active?'active':'offline'))

      wsavc3.on('custom_event_from_server',event=>console.log('got event from server', event))


















      var canvas = document.getElementById('cam')
      var fb = document.getElementById('frame_buffer')
      // Create h264 player
      var wsavc = new WSAvcPlayer.default({useWorker:true});
      document.getElementById('video-box').appendChild(wsavc.AvcPlayer.canvas)
      //expose instance for button callbacks
      window.wsavc = wsavc;
      
      //maybe get rid of the ws inside the player?
      //var uri = "ws://meganeko:3000/videoStream"// + document.location.host;
      //var uri = "ws://" + document.location.host;
      var uri = "ws://192.168.2.103:3333/"
      wsavc.connect(uri);

      //wsavc.on('message', m=>console.log(m))
      
      wsavc.on('disconnected',()=>console.log('WS Disconnected'))
      wsavc.on('connected',()=>console.log('WS connected'))
      wsavc.on('frame_shift',(fbl)=>{
       fb.innerText = 'fl: '+fbl
      })
      

      wsavc.on('resized',(payload)=>{
        console.log('resized', payload)
        const vb = document.getElementById('video-box')

        vb.style = `padding-bottom: calc( 100% * ${payload.height} / ${ payload.width })`
      })

      wsavc.on('stream_active',active=>console.log('Stream is ',active?'active':'offline'))


      wsavc.on('custom_event_from_server',event=>console.log('got event from server', event))















      

    </script>
    
  </body>
</html>
>>>>>>> 482dd2eb9d7aebbc3d55b8fbd8f7e090dcefd6a6
